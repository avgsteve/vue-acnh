import{I as e,L as t,a}from"./index.37cfd9ea.js";import{m as n,M as l,L as s,D as i,e as r,Q as d,b as o,o as c,d as u,c as m,w as h,J as p,K as g,E as _,G as f,F as C,V as b,I as w}from"./vendor.a945b803.js";import{_ as O,a as v,b as T}from"./detailedCardContent.7fa43c68.js";import{_ as k}from"./AddToListBtn.b5210be3.js";var D=n({name:"IndexBar",components:{},setup:()=>({indexList:[1,2,3,4,5,6,"AAAAAA","BAAAAAA",9,10]}),props:{},data:e=>({dataObj:null,zIndex:-1}),computed:{},watch:{},created(){},mounted(){},unmounted(){},methods:{}});D.render=function(e,t,a,n,o,c){const u=l("van-index-anchor"),m=l("van-cell"),h=l("van-index-bar");return s(),i("div",null,[r(h,{"index-list":e.indexList,"z-index":"zIndex"},{default:d((()=>[r(u,{index:"1"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(u,{index:"2"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(u,{index:"3"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(u,{index:"4"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(u,{index:"5"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(u,{index:"6"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(u,{index:"7"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(u,{index:"8"}),r(m,{title:"文本"}),r(m,{title:"文本"}),r(m,{title:"文本"})])),_:1},8,["index-list"])])};var x=n({name:"NumberStepper",components:{},inject:{currentValue:{default:10}},setup:()=>{},props:{disableInput:{type:Boolean,default:!0},initialNumber:{type:Number,default:5},minNumber:{type:Number,default:5},maxNumber:{type:Number,default:50},step:{type:Number,default:5},integer:{type:Boolean,default:!0},inputWidth:{type:String,default:"40px"},buttonSize:{type:String,default:"32px"},longPress:{type:Boolean,default:!0}},data:e=>({dataObj:null}),computed:{},watch:{},created(){},mounted(){console.warn("stepper is mounted! :",this)},unmounted(){},methods:{onChange(e){console.log("stepper的值改變了: ",e),this.$emit("EmitCurrentStepperValue",e)}}});x.render=function(e,t,a,n,r,d){const o=l("van-stepper");return s(),i(o,{modelValue:e.currentValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentValue=t),modelModifiers:{number:!0},onChange:e.onChange,step:"step"},null,8,["modelValue","onChange"])};const E=n({name:"SearchResultTable",components:{NumberStepper:x,ItemCard:O,ItemCardBody:v,DetailedCardContent:T,AddToListBtn:k},setup:()=>{let e=o(window.innerWidth);const t=()=>e.value=window.innerWidth;c((()=>window.addEventListener("resize",t))),u((()=>window.removeEventListener("resize",t)));const a=m((()=>e.value<550?"xs":e.value>549&&e.value<1200?"md":e.value>1199?"lg":void 0)),n=m((()=>e.value));return h(n,((e,t)=>{console.log({newWidth:e,oldWidth:t})})),{width:n,type:a}},props:{},data:()=>({data_numbersOfResultPerPage:20,data_stepperInitialValue:10,data_numberOfCurrentPage:1,data_showNameOfSelectedLanguageOnly:!1,data_showNameOfLanguage:{en:!0,zhTW:!0,zhCN:!0},data_cardSettingAndData:{cardTitle:"",setting:{closeOnClickOverlay:!0,showCancelBtn:!1,showLoader:!0},data:{}},data_itemId:"",windowWidth:window.innerWidth}),computed:{computed_selectedCategory(){return this.$store.getters[`itemsData/${e.GET_SELECTED_CATEGORY}`]},computed_selectedSorting(){return this.$store.getters[`itemsData/${e.get_SELECTED_SORTING_OPTION}`]},computed_currentQueryData(){return this.$store.getters[`itemsData/${e.GET_ITEMS_FOR_QUERY}`]},computed_totalPages(){const t=this.$store.getters[`itemsData/${e.GET_ITEMS_FOR_QUERY}`],a=this.data_numbersOfResultPerPage;return Math.ceil(t.length/a)},computed_resultsToRenderForCurrentPage(){let t=(this.data_numberOfCurrentPage-1)*this.data_numbersOfResultPerPage,a=Array.from(this.$store.getters[`itemsData/${e.GET_ITEMS_FOR_QUERY}`]).slice(t,t+this.data_numbersOfResultPerPage);for(const e of a)e.name=e.nameEn;return console.log("resultsToShowInPage",a),a},computed_ifNoResultsToShow(){return 0===Array.from(this.$store.getters[`itemsData/${e.GET_ITEMS_FOR_QUERY}`]).length}},watch:{data_showNameOfSelectedLanguageOnly(){const e=this.data_showNameOfSelectedLanguageOnly;console.log("是否只顯示目前語言的名稱: ",e);let a=this.$store.getters[`languageSetting/${t.GET_CURRENT_LANGUAGE}`];console.log("currentLanguage： ",a);let n=this.data_showNameOfLanguage;if(!0===e)for(const t in n)console.log("key:",t),console.log("showNameOfLanguage[key]:",n[t]),t!==a&&(n[t]=!1),t===a&&(n[t]=!0),console.log("處理完的 showNameOfLanguage:",n);else for(const t in n)n[t]=!0},windowWidth(e,t){console.log("newWidth:",e)}},created(){},mounted(){},unmounted(){},methods:{clickCardConfirmEventHandler(e){console.log("data in clickCardConfirmEventHandler: ",e),this.data_cardSettingAndData.showCard=!1},clickItemForDetail(e,t){console.log("clickItemForDetail is called: "),this.axios.get(`/api/ac/items/detailed-data?name=${e}`).then((e=>{this.data_cardSettingAndData.showCard=!0;const a=e.data;a.idForTranslation=t,this.data_cardSettingAndData.data=a,setTimeout((()=>{this.data_cardSettingAndData.setting.showLoader=!1}),400)}))}}}),y=w();p("data-v-4b4f9d92");const N={class:"SearchResultTable"},$={class:"searchFilterOption"},S={class:"searchFilterOption__item"},L={class:"resultsTitle"},F={class:"resultsCount"},I={class:"searchFilterOption__item"},P={class:"resultsTitle"},A={class:"searchFilterOption__item"},R={class:"resultsTitle"},z={class:"stepper"},V={class:"searchFilterOption__item"},W={class:"resultsTitle"},B={class:"stepper"},G={key:0},U={key:1,class:"itemTable"},j={key:0,class:"minWidthCell"},M={key:1,class:"minWidthCell"},Q={key:2,class:"minWidthCell"},Y={class:"clickForDetail-image"},H={class:"clickForDetail source"},J={class:"clickForDetail source"},K={key:0,class:"minWidthCell name_tw"},q={key:1,class:"minWidthCell name_cn"},X={key:2,class:"minWidthCell name_en"},Z={class:"addToListBtn"};g();const ee=y(((e,t,a,n,d,o)=>{const c=l("van-switch"),u=l("van-stepper"),m=l("AddToListBtn"),h=l("DetailedCardContent"),p=l("ItemCardBody"),g=l("ItemCard");return s(),i("div",N,[r("div",$,[r("div",S,[r("p",L,_(e.$t("ui.search.resultCount"))+": ",1),r("p",F,_(e.computed_currentQueryData.length),1)]),r("div",I,[r("p",P,_(e.$t("ui.search.showNameInCurrentLanguage")),1),r(c,{modelValue:e.data_showNameOfSelectedLanguageOnly,"onUpdate:modelValue":t[1]||(t[1]=t=>e.data_showNameOfSelectedLanguageOnly=t),"active-color":"#ee0a24","inactive-color":"#dcdee0",size:e.width>500?"26px":"18px"},null,8,["modelValue","size"])]),r("div",A,[r("p",R,_(e.$t("ui.search.resultsPerPage")),1),r("div",z,[r(u,{modelValue:e.data_numbersOfResultPerPage,"onUpdate:modelValue":t[2]||(t[2]=t=>e.data_numbersOfResultPerPage=t),step:"2",min:"5",max:"30",integer:"","disable-input":"","input-width":e.width>500?"32px":"24px","button-size":e.width>500?"28px":"18px"},null,8,["modelValue","input-width","button-size"])])]),r("div",V,[r("p",W,_(e.$t("ui.search.pageNumber"))+" : "+_(e.data_numberOfCurrentPage)+" / "+_(e.computed_totalPages),1),r("div",B,[r(u,{modelValue:e.data_numberOfCurrentPage,"onUpdate:modelValue":t[3]||(t[3]=t=>e.data_numberOfCurrentPage=t),step:"1",min:"1",max:e.computed_totalPages,integer:"","disable-input":"","input-width":e.width>500?"32px":"24px","button-size":e.width>500?"28px":"18px"},null,8,["modelValue","max","input-width","button-size"])])])]),r("div",null,[e.computed_ifNoResultsToShow?(s(),i("div",G,[r("h4",null,_(e.$t("ui.search.pageNumber")),1),r("h4",null,_(e.$t("ui.search.resetFilter"))+"?",1)])):f("",!0),e.computed_ifNoResultsToShow?f("",!0):(s(),i("table",U,[r("thead",null,[r("tr",null,[e.data_showNameOfLanguage.zhTW?(s(),i("th",j,_(e.$t("table.header.nameTw")),1)):f("",!0),e.data_showNameOfLanguage.zhCN?(s(),i("th",M,_(e.$t("table.header.nameCn")),1)):f("",!0),e.data_showNameOfLanguage.en?(s(),i("th",Q,_(e.$t("table.header.nameEn")),1)):f("",!0),r("th",null,_(e.$t("ui.button.addToList")),1),r("th",Y,_(e.$t("table.header.img")),1),r("th",null,_(e.$t("table.header.priceBuy")),1),r("th",null,_(e.$t("table.header.priceSell")),1),r("th",H,_(e.$t("table.header.variants")),1),r("th",J,_(e.$t("table.header.source")),1)])]),r("tbody",null,[(s(!0),i(C,null,b(e.computed_resultsToRenderForCurrentPage,((t,a)=>(s(),i("tr",{key:a,"data-item_name":t.nameEn},[e.data_showNameOfLanguage.zhTW?(s(),i("td",K,_(t.nameTw),1)):f("",!0),e.data_showNameOfLanguage.zhCN?(s(),i("td",q,_(t.nameCn),1)):f("",!0),e.data_showNameOfLanguage.en?(s(),i("td",X,_(t.nameEn),1)):f("",!0),r("td",Z,[r(m,{prop_itemData:t,class:"no_absolutePosition"},null,8,["prop_itemData"])]),r("td",{onClick:a=>e.clickItemForDetail(t.nameEn,t._id.$oid),class:"clickForDetail clickForDetail-image"},[r("img",{src:t.img,alt:""},null,8,["src"])],8,["onClick"]),r("td",{onClick:a=>e.clickItemForDetail(t.nameEn,t._id.$oid),class:"clickForDetail price"},_("-1"==t.price.buy?"N/A":t.price.buy),9,["onClick"]),r("td",{onClick:a=>e.clickItemForDetail(t.nameEn,t._id.$oid),class:"clickForDetail price"},_(t.price.sell),9,["onClick"]),r("td",{onClick:a=>e.clickItemForDetail(t.nameEn,t._id.$oid),class:"clickForDetail variants"},_(t.variants.length),9,["onClick"]),r("td",{onClick:a=>e.clickItemForDetail(t.nameEn,t._id.$oid),class:"clickForDetail source"},_(e.$t(`items.sources.${t.source[0].replace("'s ","s")}`)),9,["onClick"])],8,["data-item_name"])))),128))])]))]),r(g,{onCardConfirmBtnClicked:e.clickCardConfirmEventHandler,prop_cardData:e.data_cardSettingAndData},{default:y((()=>[r(p,null,{default:y((()=>[r(h,{prop_cardData:e.data_cardSettingAndData},null,8,["prop_cardData"])])),_:1})])),_:1},8,["onCardConfirmBtnClicked","prop_cardData"])])}));E.render=ee,E.__scopeId="data-v-4b4f9d92";var te=n({name:"searchPage",components:{Toolbar:a,IndexBar:D,SearchResultTable:E},setup:()=>{}});const ae=w();p("data-v-76f6908d");const ne={class:"searchPageContainer"},le=r("div",{class:"bottomSpace"},null,-1);g();const se=ae(((e,t,a,n,d,o)=>{const c=l("Toolbar"),u=l("SearchResultTable");return s(),i("div",ne,[r(c),r(u),le])}));te.render=se,te.__scopeId="data-v-76f6908d";export default te;
