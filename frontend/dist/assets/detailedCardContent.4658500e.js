import{m as e,J as a,K as t,M as s,L as i,D as o,e as r,G as l,H as n,I as d,E as c,y as m,F as u,V as p}from"./vendor.a945b803.js";import{L as v}from"./index.ac971fec.js";import{_}from"./AddToListBtn.20c11c0c.js";const g=e({name:"ItemCard",components:{},setup(){},props:{prop_showCancelBtn:{type:Boolean,require:!1,default:!1},prop_cardData:{type:Object,required:!0,showCard:!1,cardTitle:"",cardContentIsLoading:!0}},data:()=>({dataObj:null,closeOnOverlay:!0}),computed:{computed_cardTitle(){let e=this.$t("items.terms.detail");return e?e||void 0:"無標題"},computed_showCard(){let e=this.prop_cardData.showCard;return!!e&&(!!e||void 0)},computed_showLoader(){let e=this.prop_cardData.setting.showLoader;return!!e&&(!!e||void 0)}},watch:{},created(){},mounted(){},unmounted(){},methods:{onConfirm(e){console.log("confirm btn clicked"),this.$emit("cardConfirmBtnClicked",!1)},onClose(e){console.log("close btn clicked"),this.$emit("cardCloseBtnClicked","someValue")}}}),h=d();a("data-v-86d73af4");const b={key:0,class:"cardBodyPreloader"},y={key:1,class:"cardBody"};t();const D=h(((e,a,t,d,c,m)=>{const u=s("van-loading"),p=s("van-dialog");return i(),o(p,{class:"item-card-dialog",show:e.computed_showCard,title:e.computed_cardTitle,width:"90vw","show-cancel-button":e.prop_cardData.setting.showCancelBtn,"close-on-click-overlay":e.closeOnOverlay,confirmButtonText:"close",onConfirm:e.onConfirm,onClose:e.onClose},{default:h((()=>[e.computed_showLoader?(i(),o("div",b,[r(u,{type:"spinner",color:"#1989fa"})])):l("",!0),e.computed_showLoader?l("",!0):(i(),o("div",y,[n(e.$slots,"default",{},void 0,!0)]))])),_:3},8,["show","title","show-cancel-button","close-on-click-overlay","onConfirm","onClose"])}));g.render=D,g.__scopeId="data-v-86d73af4";const T=e({name:"ItemCardBody",components:{},setup(){},props:{},data:()=>({dataObj:null}),computed:{},watch:{},created(){},mounted(){},unmounted(){},methods:{}}),f=d();a("data-v-34457a0f");const C={class:"cardBodyContent"};t();const $=f(((e,a,t,s,r,l)=>(i(),o("div",C,[n(e.$slots,"default",{},void 0,!0)]))));T.render=$,T.__scopeId="data-v-34457a0f";const w=e({name:"DetailedCardContent",components:{AddToListBtn:_},setup:()=>{},props:{prop_cardData:{type:Object,required:!0}},data:()=>({dataObj:null,active:0,idForTranslation:""}),computed:{computed_itemData(){let e=this.prop_cardData.data;console.log("傳進computed_itemData裡面的prop_cardData: ",e);let a={id:"",idForTranslation:"",name:"",category:"",sourceSheet:"",subCategory:null,hhaPoints:0,version:"",diy:!0,isCreature:!1,price:{sell:0,buy:0},tag:null,sources:[],isWearable:!1,isDecoration:!1,wearableOptions:{villagerEquippable:!1,villagerGender:null,style1:"",style2:""}},t=[];if(e.variants)for(let s=0;s<e.variants.length;s++){const a=e.variants[s];for(let e=0;e<a.source.length;e++){const s=a.source[e].replace("'s ","s");s!==t[t.length-1]&&t.push(s)}}return a.id=e._id,a.idForTranslation=e.idForTranslation,a.name=e.name,a.category=e.sourceSheet.toLowerCase(),a.sourceSheet=e.sourceSheet,a.hhaPoints=e.hhaBasePoints,a.version=e.versionAdded,a.diy=e.diy,a.isCreature=void 0!==e.critterpediaImage,a.price={buy:void 0!==e.critterpediaImage?"N/A":e.variants[0].buy,sell:void 0!==e.critterpediaImage?e.sell:e.variants[0].sell},a.sources=t,a.tag=void 0!==e.tag?e.tag:null,a.isDecoration=void 0!==e.size,a.isWearable=void 0!==e.clothGroupId,a.wearableOptions.villagerEquippable=void 0!==e.villagerEquippable,a.wearableOptions.villagerGender=void 0===e.villagerEquippable?null:e.villagerGender,a.wearableOptions.style1=void 0!==e.style1?e.style1:null,a.wearableOptions.style2=void 0!==e.style2?e.style1:null,a.subCategory=!0!==a.isWearable?e.inventoryFilename:null,console.log("整理過的資料:",a),a},computed_itemImage(){let e,a=this.prop_cardData.data;return void 0!==a.critterpediaImage&&(e=a.critterpediaImage),null==a.critterpediaImage&&(e=a.variants[0].closetImage||a.variants[0].storageImage||a.variants[0].image),e||console.warn("找不到圖片資料! ",a),e},computed_variants(){let e=this.prop_cardData.data,a=e.sourceSheet,t=e.variants,s={variantType:"",variants:[],labels:[]},i={name:"",img:""};if(s.variantType=a,!e.variants)return s.variantType=null,s;if("Photos"===a){s.variantType=a;for(let e=0;e<t.length;e++){const a=t[e];i.name=a.variation,i.img=a.img,s.variants.push(i)}}if(e.isWearable){console.log("variants: 穿戴服飾類"),s.variantType=a;for(let e=0;e<t.length;e++){const a=t[e];let i={name:a.variation,img:a.storageImage||a.closetImage,colors:a.colors,labelThemes:a.labelThemes};s.variants.push(i)}}if(!e.isWearable){s.variantType=a;for(let a=0;a<t.length;a++){const i=t[a];let o={name:i.variation||e.name,img:i.storageImage||i.inventoryImage||i.image,colors:i.colors||[],labelThemes:i.labelThemes||i.themes||[]};s.variants.push(o);const r=t[0].labelThemes;s.labels=void 0!==r&&r.length>0?r:[]}}return s},computed_itemNameTranslated(){let e,a=this.prop_cardData.data.idForTranslation,t=this.prop_cardData.data.name,s=this.$store.getters[`languageSetting/${v.GET_CURRENT_LANGUAGE}`];if("en"===s)return t;if(console.warn("idForTranslation:",a),console.warn("itemName:",t),a){e=this.$store.getters[`languageSetting/${v.GET_TRANSLATION_DATA_BY_ID}`][a].translation[s]}if(!a){return console.warn("沒有idForTranslation"),e=this.$store.getters[`languageSetting/${v.GET_TRANSLATION_DATA_BY_NAME}`][t].translation[s],e}return console.log("搜尋的翻譯結果(itemNameTranslated):",e),e}},watch:{computed_itemData(){},computed_itemNameTranslated(){}},created(){},mounted(){},unmounted(){},methods:{}}),I=d();a("data-v-7db4c7e0");const A=r("hr",null,null,-1),B={class:"cardDetail__container"},k={class:"cardDetail__box"},O={class:"cardDetail__box__sub"},L={class:"cardDetail__actionBtns"},N={class:"cardDetail__box__sub"},S={class:"price"},E=r("span",null,[r("img",{src:"/assets/bell.f849511d.png",alt:""})],-1),x={class:"price"},G=r("span",null,[r("img",{src:"/assets/bell.f849511d.png",alt:""})],-1),F={key:0},j={key:1},q={class:"cardDetail__box"},P={class:"cardDetail__box__sub y-axis-scrollable"},W={class:"cardDetail_item"},R={class:"cardDetail_item"},U={class:"cardDetail_item"},M=r("div",{class:"cardDetail__box__sub"},null,-1),V={key:0,class:"heading--variationTab"},Y={class:"variant__container"},z={class:"variant__meta"},H={class:"variant__meta colors-labels"},J={class:"variant__colors"},K=m("Colors: "),Q={class:"variant__labels"},X=m("Labels: ");t();const Z=I(((e,a,t,n,d,v)=>{const _=s("AddToListBtn"),g=s("van-tag"),h=s("van-tab"),b=s("van-tabs");return i(),o("div",null,[A,r("div",B,[r("div",k,[r("div",O,[r("h4",null,c(!0===e.computed_itemData.isCreature?e.$t(`creatures.${e.computed_itemData.name}`):e.$t(`items.item.${e.computed_itemData.name}`)),1),r("img",{class:"itemImage",src:e.computed_itemImage,alt:""},null,8,["src"]),r("div",L,[r("div",null,[r(_,{prop_itemData:e.prop_cardData.data},null,8,["prop_itemData"])])])]),r("div",N,[r("div",null,[r("div",S,[E,m(" "+c(e.$t("table.header.priceSell"))+" : "+c(e.computed_itemData.price.sell),1)]),r("div",x,[G,m(" "+c(e.$t("table.header.priceBuy"))+" : "+c(-1===e.computed_itemData.price.buy?"N/A":e.computed_itemData.price.buy),1)])]),r("div",null,[e.computed_itemData.isCreature?l("",!0):(i(),o("div",F,[m(c(e.$t("table.header.source"))+" : ",1),(i(!0),o(u,null,p(e.computed_itemData.sources,(a=>(i(),o("span",{key:a,title:a},c(e.$t(`items.sources.${a}`)),9,["title"])))),128))])),e.computed_itemData.isCreature?(i(),o("div",j,[m(c(e.$t("table.header.source"))+" : ",1),r("span",{title:e.$t("table.header.source")},c(e.$t("items.sources.catch")),9,["title"])])):l("",!0)])])]),r("div",q,[r("div",P,[r("div",W,[r("div",null,c(e.$t("items.category.category"))+": ",1),r("div",null,c(!0!==e.computed_itemData.isCreature?e.$t(`items.category.${e.computed_itemData.category}`).split("/")[0]:e.$t(`creatures.categories.${e.computed_itemData.sourceSheet}`)),1)]),r("div",R,[r("div",null,c(e.$t("items.terms.hhaPoints"))+": ",1),r("div",null,c(e.computed_itemData.hhaPoints),1)]),r("div",U,[r("div",null,c(e.$t("items.terms.version")),1),r("div",null,c(e.computed_itemData.version||"N/A"),1)])]),M]),e.computed_itemData.isCreature?l("",!0):(i(),o("p",V," 顏色/風格 ")),e.computed_itemData.isCreature?l("",!0):(i(),o(b,{key:1,active:e.active,"onUpdate:active":a[1]||(a[1]=a=>e.active=a)},{default:I((()=>[(i(!0),o(u,null,p(e.computed_variants.variants,(e=>(i(),o(h,{key:e.img,title:e.name},{default:I((()=>[r("div",Y,[r("div",z,[r("img",{class:"variant_img",src:e.img,alt:e.name},null,8,["src","alt"])]),r("div",H,[r("div",J,[r("p",null,[K,(i(!0),o(u,null,p(e.colors,(e=>(i(),o(g,{class:"tags",type:"primary",key:e},{default:I((()=>[m(c(e),1)])),_:2},1024)))),128))])]),r("div",Q,[r("p",null,[X,(i(!0),o(u,null,p(e.labelThemes,(e=>(i(),o(g,{class:"tags",type:"primary",key:e},{default:I((()=>[m(c(e),1)])),_:2},1024)))),128))])])])])])),_:2},1032,["title"])))),128))])),_:1},8,["active"]))])])}));w.render=Z,w.__scopeId="data-v-7db4c7e0";export{g as _,T as a,w as b};
